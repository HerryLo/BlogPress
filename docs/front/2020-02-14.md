---
title: 'é“¾è¡¨çš„åº”ç”¨å’Œå®ç°'
date: 2020-02-14 17:06
tags: 
    - é“¾è¡¨ï¼Œæ•°æ®ç»“æ„
---

# é“¾è¡¨çš„åº”ç”¨å’Œå®ç°

[ä½œè€…ï¼šHerryLo](https://github.com/HerryLo)
[åšå®¢åŸæ–‡é“¾æ¥](https://github.com/AttemptWeb/Record/issues/22)

åœ¨è½¯ä»¶å¼€å‘ä¸­é“¾è¡¨å’Œæ•°ç»„éå¸¸å¸¸è§ï¼Œå®ƒä»¬éƒ½æ˜¯çº¿æ€§å­˜å‚¨ï¼ŒåŒºåˆ«åªæ˜¯å­˜å‚¨æ–¹å¼çš„ä¸åŒã€‚æ•°ç»„æ˜¯è¿ç»­å­˜å‚¨ï¼Œé“¾è¡¨æ˜¯ç¦»æ•£å­˜å‚¨(éè¿ç»­)ã€‚é“¾è¡¨æ˜¯æ ¹æ®èŠ‚ç‚¹çš„å‰åå…³ç³»è¿›è¡Œå­˜å‚¨çš„ï¼ŒåŒæ—¶ç”±äºå®ƒæ˜¯ç¦»æ•£å­˜å‚¨ï¼Œå¯¹å†…å­˜ç©ºé—´åˆ©ç”¨æ›´å¥½ã€‚

é“¾è¡¨åˆ†ä¸ºï¼šå•é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€å¾ªç¯é“¾è¡¨ï¼Œä¸‹é¢æˆ‘ä¸»è¦æ˜¯ä»¥**å•é“¾è¡¨**ä¸ºç¤ºä¾‹è¯´æ˜ï¼Œå•é“¾è¡¨åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š

```c
    å¤´ç»“ç‚¹:A           é¦–èŠ‚ç‚¹:B                                  å°¾èŠ‚ç‚¹:C
       ğŸ‘‡               ğŸ‘‡                                       ğŸ‘‡
[data=NULL|next]â€”â€”>[data|next]â€”â€”>[data|next]â€”â€”>[data|next]â€”â€”>[data|next]â€”â€”> NULL
```
ç”±ä¸Šç»“æ„å¯ä»¥çŸ¥é“ï¼Œé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç”±ä¸¤ä¸ªå±æ€§æ„æˆï¼Œ```data```è´Ÿè´£å­˜å‚¨æ•°æ®ï¼Œ```next```è´Ÿè´£æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å½“ç„¶ï¼ŒåŒå‘é“¾è¡¨å’Œå¾ªç¯é“¾è¡¨éƒ½æ˜¯ä»¥ä¸Šé¢çš„ç»“æ„è¿›è¡Œæ‰©å±•çš„ã€‚

å•é“¾è¡¨çš„å¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹æ¯”è¾ƒç‰¹æ®Šï¼Œå¤´ç»“ç‚¹ç”¨æ¥è®°å½•é“¾è¡¨çš„å¤´åœ°å€ï¼Œæ˜¯é“¾è¡¨éå†çš„èµ·ç‚¹ï¼Œå°¾ç»“ç‚¹çš„åç»§æŒ‡é’ˆä¸æŒ‡å‘ä»»ä½•ç»“ç‚¹ï¼Œè€Œæ˜¯æŒ‡å‘ä¸€ä¸ªç©ºåœ°å€NULLã€‚è¿™é‡Œé¦–èŠ‚ç‚¹æ‰æ—¶ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ã€‚

**æ—¶é—´å¤æ‚åº¦**: å•é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼ŒéšæœºæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ç›¸å¯¹äºæ•°ç»„ï¼Œé“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤æ›´åŠ ç®€ä¾¿ã€‚

å°½ç®¡åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ•°ç»„çš„ä½¿ç”¨å¯èƒ½å¤§äºé“¾è¡¨ï¼Œä½†ç”±äºé“¾è¡¨çš„ä¼˜ç‚¹ï¼Œå°±æˆ‘æ‰€çŸ¥é“ï¼Œç›®å‰Reactæ¡†æ¶ä¸­å°±æœ‰åº”ç”¨ï¼ŒReacté¡¹ç›®ä¸­React Fiberç”±å•é“¾è¡¨æ„æˆï¼Œå‚è€ƒï¼š[react16.3çš„fiberæ¶æ„](https://blog.csdn.net/songshuzhong/article/details/80642651)ã€‚

## Cè¯­è¨€å•é“¾è¡¨å®ç°

åˆ›å»ºç»“æ„ä½“Nodeæ•°æ®ç±»å‹ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å°†æ˜¯ä¸‹é¢çš„æ•°æ®ç»“æ„ï¼š
```c
// é»˜è®¤dataä¸ºæ•´å‹
typeof struct Node{
    int data; // æ•°æ®åŸŸ
    struct Node * next; // æŒ‡é’ˆåŸŸ
}Node, *PNode;
```
åœ¨ä¸Šé¢çš„è®²è§£ä¸­æœªè¯´åˆ°ç»“æ„ä½“ï¼Œç®€å•ç‚¹ç»“æ„ä½“å°±æ˜¯ä¸€ç§æ•°æ®ç±»å‹ã€‚(*è¡¨ç¤ºæŒ‡é’ˆï¼ŒæŒ‡é’ˆå°±æ˜¯å†…å­˜åœ°å€ï¼Œ```struct Node * next```å°±æ˜¯åˆ›å»ºä¸€ä¸ªNodeç±»å‹çš„ç»“æ„ä½“æŒ‡é’ˆå˜é‡nextï¼ŒæŒ‡é’ˆå˜é‡å³å­˜å‚¨å†…å­˜åœ°å€çš„å˜é‡)ã€‚

é“¾è¡¨åˆ›å»ºå‡½æ•°å¦‚ä¸‹ï¼š
```c
// åˆ›å»ºé“¾è¡¨
PNode createList() {
    // é•¿åº¦
    int len;
    // å­˜æ”¾ç”¨æˆ·è¾“å…¥çš„èŠ‚ç‚¹å€¼
    int val;
    
    // ä¸å­˜æ”¾æœ‰æ•ˆæ•°æ®çš„å¤´ç»“ç‚¹ï¼Œåˆ†é…åŠ¨æ€å†…å­˜
    PNode pHead = (PNode)malloc(sizeof(Node));
    // å®¹é”™
    if(NULL == pHead) {
        printf("åˆ†é…å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢ï¼\n");
        exit(-1);
    }
    
    // åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹
    PNode pTail = pHead;
    pTail->next = NULL;
    
    printf("è¯·è¾“å…¥é“¾è¡¨çš„é•¿åº¦: len=");
    scanf("%d", &len);
    
    for (int i = 0; i<len; ++i) {
        printf("è¯·è¾“å…¥ç¬¬%dä¸ªèŠ‚ç‚¹çš„å€¼: ", i+1);
        scanf("%d", &val);
        // åˆ†é…åŠ¨æ€å†…å­˜
        PNode pNew = (PNode)malloc(sizeof(Node));
        if(NULL == pNew) {
            printf("åˆ†é…å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢ï¼\n");
            exit(-1);
        }
        
        // èµ‹å€¼/æ›¿æ¢
        pNew->data = val;
        pTail->next = pNew;
        pNew->next = NULL;
        pTail = pNew;
    }
    return pHead;
}

// éå†  
int traverseList(PNode pHead) {
    printf("æ‰“å°é“¾è¡¨çš„zå€¼ï¼š\n");
    PNode next = pHead->next;
    while(next != NULL) {
        printf("%d \n", next->data);
        next = next->next;
    }
    printf("\n");
    return 0;
}

// ç§»é™¤
// pHead é“¾è¡¨å¤´èŠ‚ç‚¹
// i ç§»é™¤çš„ä¸‹æ ‡ï¼Œç”±1å¼€å§‹
bool removeList(PNode pHead, int position, int *pVal) {
    PNode p = pHead;
    int i = 0;
    
    // p->next != NULLï¼Œç§»é™¤çš„å‰æä¸‹ï¼Œä¿è¯è¦ç§»é™¤çš„é‚£ä¸ªåªå­˜åœ¨ï¼›
    // åœ¨å­˜åœ¨çš„å‰æä¸‹ï¼Œpä¼šæŒ‡å‘è¦ç§»é™¤çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼›
    while (p->next != NULL && i< position - 1) {
        p = p->next;
        ++i;
    }
    
    // i > position - 1ï¼Œé˜²æ­¢è´Ÿæ•°
    if(i > position - 1 || p->next == NULL) {
        return false;
    }
    
    PNode q = p->next;
    *pVal = p->data;
    
    p->next = p->next->next;
    free(q);
    q = NULL;
    return true;
}

// æ’å…¥
// pHead é“¾è¡¨å¤´èŠ‚ç‚¹
// i æ’å…¥çš„ä¸‹æ ‡ï¼Œç”±1å¼€å§‹
bool insertList(PNode pHead, int position, int val){
    PNode p = pHead;
    int i = 0;
    
    // p != NULLï¼Œæ’å…¥çš„å‰æä¸‹ï¼Œä¿è¯è¦æ’å…¥ä½ç½®çš„å‰yä¸€ä¸ªå…ƒç´ å­˜åœ¨ï¼›
    // åœ¨å­˜åœ¨çš„å‰æä¸‹ï¼Œpä¼šæŒ‡å‘è¦æ’å…¥çš„å‰çš„èŠ‚ç‚¹ï¼›
    while (p->next != NULL && i< position - 1) {
        p = p->next;
        ++i;
    }
    // // i > position - 1ï¼Œé˜²æ­¢è´Ÿæ•°
    if(i > position - 1 || p == NULL) {
        return false;
    }
    
    PNode pNew = (PNode)malloc(sizeof(Node));
    if(NULL == pNew) {
        printf("åˆ†é…å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢ï¼\n");
        exit(-1);
    }
    pNew->data = val;
    pNew->next = p->next;
    p->next = pNew;
    return true;
}
```
é€šè¿‡```createList```å‡½æ•°åˆ›å»ºå•é“¾è¡¨ï¼Œè¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒï¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æŒ‡é’ˆå˜é‡pTailï¼Œè¿›è¡ŒèŠ‚ç‚¹çš„æ›¿æ¢ã€‚```traverseList```å‡½æ•°æ‰“å°é“¾è¡¨çš„å€¼ï¼Œ```removeList```å‡½æ•°è´Ÿè´£ç§»é™¤èŠ‚ç‚¹ï¼Œ```insertList```å‡½æ•°è´Ÿè´£æ’å…¥èŠ‚ç‚¹ã€‚

mainå‡½æ•°ä¸­åˆ›å»ºé“¾è¡¨ï¼š
```c
int main() {
    // å¤´èŠ‚ç‚¹
    PNode pHead = NULL; // ç­‰ä»·äºstruct Node * pHead = NULL
    int value;
    
    pHead = createList();
    removeList(pHead, 8, &value);
    insertList(pHead, 2, 123123);
    traverseList(pHead);
}
```

[ä»£ç ç¤ºä¾‹ï¼šCè¯­è¨€åˆ›å»ºå•é“¾è¡¨](https://github.com/HerryLo/CStruct/blob/master/list/main.c)

å‚è€ƒï¼š

[éƒæ–Œè€å¸ˆæ•°æ®ç»“æ„è§†é¢‘](https://www.bilibili.com/video/av12907870?p=14)

**ps**: å¾®ä¿¡å…¬ä¼—å·ï¼šYopaiï¼Œæœ‰å…´è¶£çš„å¯ä»¥å…³æ³¨ï¼Œæ¯å‘¨ä¸å®šæœŸæ›´æ–°ã€‚ä¸æ–­åˆ†äº«ï¼Œä¸æ–­è¿›æ­¥

![](/webChat1.png)
